<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INAP - Initiative Nationale d'Aide à la Population</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#224488',
                        secondary: '#1F2937',
                        light: '#F3F4F6',
                        accent: '#4F46E5',
                    },
                    fontFamily: {
                        heading: ['Montserrat', 'sans-serif'],
                        body: ['Open Sans', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Open Sans', sans-serif; scroll-behavior: smooth; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Montserrat', sans-serif; }
        .sticky-nav { position: sticky; top: 0; z-index: 50; }
        .whatsapp-float { position: fixed; bottom: 30px; right: 30px; z-index: 100; }
        .step-form { display: none; }
        .step-form.active { display: block; }
        .dropdown-menu { transition: opacity 0.2s ease-out, transform 0.2s ease-out; opacity: 0; transform: translateY(-10px); pointer-events: none; }
        .dropdown-menu.active { opacity: 1; display: block !important; transform: translateY(0); pointer-events: auto; }
        .dropdown-trigger.open .dropdown-icon { transform: rotate(180deg); }
        .dropdown-icon { transition: transform 0.2s ease-out; display: inline-block; margin-left: 4px; }
        /* Carousel */
        .testimonial-container { position: relative; overflow: hidden; min-height: 300px; }
        .testimonial-slides { position: relative; width: 100%; height: 100%; }
        .testimonial-slide { position: absolute; top: 0; left: 0; width: 100%; opacity: 0; transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out; transform: translateX(100%); }
        .testimonial-slide.active { opacity: 1; transform: translateX(0); z-index: 2; }
        .testimonial-slide.prev { transform: translateX(-100%); }
        /* Accordion */
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; }
        .faq-item.active .accordion-content { max-height: 500px; }
        .faq-item.active .accordion-icon { transform: rotate(180deg); }
        .accordion-icon { transition: transform 0.3s ease-out; }
        /* Ticker */
        .news-ticker { overflow: hidden; white-space: nowrap; position: relative; }
        .news-ticker-content { display: inline-block; animation: ticker 40s linear infinite; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        .news-ticker:hover .news-ticker-content { animation-play-state: paused; }
    </style>
</head>
<body class="bg-gray-50 text-secondary">

    <!-- WhatsApp Floating Button -->
    <div class="whatsapp-float">
        <a href="https://wa.me/687856506" target="_blank" rel="noopener noreferrer" class="bg-green-500 text-white p-4 rounded-full shadow-lg hover:bg-green-600 transition duration-300 flex items-center justify-center w-16 h-16 transform hover:scale-110" aria-label="Contacter via WhatsApp">
            <i class="fab fa-whatsapp text-2xl"></i>
        </a>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-md sticky-nav">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <div class="bg-primary text-white rounded-full w-12 h-12 flex items-center justify-center mr-3 flex-shrink-0">
                        <i class="fas fa-hands-helping text-xl"></i>
                    </div>
                    <div>
                        <a href="#" class="text-xl md:text-2xl font-bold text-primary">INAP</a>
                        <p class="text-xs md:text-sm text-gray-600">Initiative Nationale d'Aide à la Population</p>
                    </div>
                </div>
                <nav class="flex items-center space-x-2 md:space-x-1 flex-wrap justify-center">
                    <a href="#" class="px-3 py-2 text-primary hover:text-accent font-medium">Accueil</a>
                    <div class="relative dropdown-container">
                        <button id="linap-menu-trigger" class="dropdown-trigger px-3 py-2 text-primary hover:text-accent font-medium flex items-center" aria-haspopup="true" aria-expanded="false">
                            <span>L'INAP</span>
                            <svg class="dropdown-icon h-4 w-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                        </button>
                        <div id="linap-menu" class="dropdown-menu absolute bg-white shadow-lg rounded-md mt-2 py-1 w-48 z-30 right-0 md:left-0">
                             <a href="#about" class="block px-4 py-2 text-sm text-secondary hover:bg-primary hover:text-white">À propos de nous</a>
                             <a href="#domains" class="block px-4 py-2 text-sm text-secondary hover:bg-primary hover:text-white">Domaines d'intervention</a>
                             <a href="#news" class="block px-4 py-2 text-sm text-secondary hover:bg-primary hover:text-white">Actualités</a>
                             <a href="#testimonials" class="block px-4 py-2 text-sm text-secondary hover:bg-primary hover:text-white">Témoignages</a>
                        </div>
                    </div>
                    <a href="#apply" class="px-3 py-2 text-primary hover:text-accent font-medium">Demander une aide</a>
                    <a href="#faq" class="px-3 py-2 text-primary hover:text-accent font-medium">FAQ</a>
                    <a href="#contact" class="px-3 py-2 text-primary hover:text-accent font-medium">Contact</a>
                    <a href="#apply" class="ml-2 md:ml-4 mt-2 md:mt-0 px-5 py-2 bg-primary text-white rounded-md hover:bg-accent transition duration-300 shadow hover:shadow-md text-sm font-semibold">Soumettre</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Banner -->
    <!-- ... contenu inchangé ... -->

    <!-- Formulaire, FAQ, News, etc. inchangés excepté l'ID du radio -->
    <!-- Dans la section Soumission, remplacer : -->
    <!-- <input id="contact-email" name="contact-method" type="radio" value="Email" ...> -->
    <!-- par -->
    <!-- <input id="contact-method-email" name="contact-method" type="radio" value="Email" ...> -->

    <!-- Chatbot Trigger -->
    <!-- ... inchangé ... -->

    <!-- Footer -->
    <!-- ... inchangé ... -->

    <!-- Cookie Banner -->
    <!-- ... inchangé ... -->

    <!-- SCRIPT D'INTERACTIONS -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      // DROPDOWN
      const trigger = document.getElementById('linap-menu-trigger');
      const menu    = document.getElementById('linap-menu');
      trigger.addEventListener('click', () => {
        menu.classList.toggle('active');
        menu.classList.toggle('hidden');
        trigger.setAttribute('aria-expanded', menu.classList.contains('active'));
      });
      document.addEventListener('click', e => {
        if (!trigger.contains(e.target) && !menu.contains(e.target)) {
          menu.classList.remove('active');
          menu.classList.add('hidden');
          trigger.setAttribute('aria-expanded', 'false');
        }
      });

      // WIZARD
      const steps = Array.from(document.querySelectorAll('.step-form'));
      const progress = document.getElementById('form-progress');
      let current = 0;
      function showStep(i) {
        steps.forEach((s, idx) => s.classList.toggle('active', idx === i));
        progress.style.width = `${25 * (i + 1)}%`;
      }
      document.querySelectorAll('.next-step').forEach(btn => btn.addEventListener('click', () => { if (current < steps.length - 1) showStep(++current); }));
      document.querySelectorAll('.prev-step').forEach(btn => btn.addEventListener('click', () => { if (current > 0) showStep(--current); }));

      // COMPTEUR
      const txt = document.getElementById('project-description');
      const cnt = document.getElementById('char-count');
      txt.addEventListener('input', () => cnt.textContent = txt.value.length);

      // FICHIERS
      const fi = document.getElementById('file-upload');
      const fn = document.getElementById('file-name');
      fi.addEventListener('change', () => fn.textContent = Array.from(fi.files).map(f => f.name).join(', ') || 'Aucun fichier sélectionné');

      // FAQ
      document.querySelectorAll('.accordion-toggle').forEach(btn => btn.addEventListener('click', () => btn.closest('.faq-item').classList.toggle('active')));
      document.getElementById('faq-search').addEventListener('input', function() {
        const q = this.value.toLowerCase(); let any=false;
        document.querySelectorAll('#faq-list .faq-item').forEach(item => {
          const show = item.querySelector('.faq-question').textContent.toLowerCase().includes(q);
          item.style.display = show ? '' : 'none'; if (show) any = true;
        });
        document.getElementById('faq-no-results').style.display = any ? 'none' : '';
      });

      // CAROUSEL
      (function(){
        let idx = 0;
        const slidesCont = document.getElementById('testimonialSlides');
        const ex = [
          "Merci INAP, j'ai pu payer mon loyer ce mois-ci !",
          "Un soutien précieux pour mes études."
        ];
        ex.forEach((t,i) => {
          const d = document.createElement('div'); d.className = 'testimonial-slide'+(i===0?' active':'');
          d.innerHTML = `<p class=\"text-lg italic mb-4\">“${t}”</p><p class=\"font-semibold\">– Bénéficiaire</p>`;
          slidesCont.appendChild(d);
        });
        const slides = slidesCont.querySelectorAll('.testimonial-slide');
        function show(i){
          slides.forEach((s,j)=>{ s.classList.toggle('active', j===i); s.classList.toggle('prev', j===((i-1+slides.length)%slides.length)); });
          document.getElementById('currentTestimonialIndex').textContent = i+1;
          document.getElementById('testimonialProgressBar').style.width = `${100*(i)/(slides.length-1)}%`;
        }
        document.getElementById('nextTestimonial').addEventListener('click', ()=>{ idx=(idx+1)%slides.length; show(idx); });
        document.getElementById('prevTestimonial').addEventListener('click', ()=>{ idx=(idx-1+slides.length)%slides.length; show(idx); });
        setInterval(()=>{ idx=(idx+1)%slides.length; show(idx); }, 8000);
      })();

      // FILTRE DOMAINES
      document.querySelectorAll('#domains button').forEach(btn => btn.addEventListener('click', () => {
        const cat = btn.textContent.trim().toLowerCase();
        document.querySelectorAll('#domains .grid > div').forEach(card => card.style.display = (cat==='tous'||card.textContent.toLowerCase().includes(cat)) ? '' : 'none');
        document.querySelectorAll('#domains button').forEach(b => b.classList.remove('bg-primary','text-white'));
        btn.classList.add('bg-primary','text-white');
      }));

      // CHATBOT
      const cbt = document.getElementById('chatbot-trigger');
      const cbw = document.getElementById('chatbot-widget');
      const cbc = document.getElementById('chatbot-close');
      cbt.addEventListener('click', ()=>cbw.classList.toggle('hidden'));
      cbc.addEventListener('click', ()=>cbw.classList.add('hidden'));

      // COOKIES
      const ban = document.getElementById('cookie-banner');
      const acc = document.getElementById('cookie-accept');
      const rej = document.getElementById('cookie-reject');
      if (!localStorage.getItem('inapCookies')) ban.style.display = '';
      acc.addEventListener('click', ()=>{ localStorage.setItem('inapCookies','accepted'); ban.style.display='none'; });
      rej.addEventListener('click', ()=>{ localStorage.setItem('inapCookies','rejected'); ban.style.display='none'; });

      // CONTACT FORM
      const cf = document.getElementById('contact-form');
      const se = document.getElementById('contact-form-status');
      cf.addEventListener('submit', e => {
        e.preventDefault();
        const data = new FormData(cf);
        fetch(cf.action, { method: 'POST', body: data, headers: { 'Accept': 'application/json' } })
          .then(resp => resp.ok ? resp.json() : Promise.reject(resp))
          .then(()=>{ se.textContent = "Message envoyé !"; cf.reset(); })
          .catch(()=>{ se.textContent = "Une erreur est survenue."; });
      });
    });
    </script>
</body>
</html>
